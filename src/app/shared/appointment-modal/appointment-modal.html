<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-button" (click)="onClose()">✕</button>

    <div class="modal-body">
      <div class="modal-image">
        <img src="" alt="Cita">
      </div>

      <div class="modal-info">
        <h2 class="modal-title">Historial de las citas atendidas hasta el momento</h2>
        
        <div class="appointment-details">
          <div class="detail-row">
            <span class="detail-label">Nombre del cliente:</span>
            <span class="detail-value">{{ appointment.clientName }}</span>
          </div>

          <div class="detail-row">
            <span class="detail-label">Fecha y hora de la cita:</span>
            <span class="detail-value">
              {{ appointment.date | date:'d \'de\' MMMM \'del\' yyyy':'':'es' }}<br>
              {{ appointment.time }}
            </span>
          </div>

          <div class="detail-row" *ngIf="appointment.clientPhone">
            <span class="detail-label">Teléfono:</span>
            <span class="detail-value">{{ appointment.clientPhone }}</span>
          </div>

          <div class="detail-row" *ngIf="appointment.clientEmail">
            <span class="detail-label">Email:</span>
            <span class="detail-value">{{ appointment.clientEmail }}</span>
          </div>

          <div class="service-section">
            <h3 class="service-title">Servicio seleccionado:</h3>
            <div class="service-detail">
              <div class="service-icon">
                <img [src]="getServiceIcon()" [alt]="appointment.service">
              </div>
              <span class="service-name">{{ appointment.service }}</span>
            </div>
          </div>

          <div class="notes-section" *ngIf="appointment.notes">
            <h3 class="notes-title">Notas adicionales:</h3>
            <p class="notes-text">{{ appointment.notes }}</p>
          </div>
        </div>

        <div class="modal-actions">
          <button class="btn-confirm" (click)="onStatusChange('confirmed')">
            Confirmar Cita
          </button>
          <button class="btn-complete" (click)="onStatusChange('completed')">
            Marcar Completada
          </button>
          <button class="btn-cancel" (click)="onCancel()">
            Cancelar Cita
          </button>
        </div>
      </div>
    </div>
  </div>
</div>