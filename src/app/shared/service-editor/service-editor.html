<div class="service-editor">
  <div class="editor-header">
    <h2 class="editor-title">
      {{ mode === 'create' ? 'Crear Nuevo Servicio' : 'Editar Servicio' }}
    </h2>
    <button class="btn-close" (click)="onCancel()">✕</button>
  </div>

  <form [formGroup]="serviceForm" (ngSubmit)="onSubmit()" class="editor-form">
    <!-- Title -->
    <div class="form-group">
      <label for="title" class="form-label">
        Nombre del Servicio <span class="required">*</span>
      </label>
      <input
        type="text"
        id="title"
        formControlName="title"
        class="form-input"
        placeholder="Ej: Masaje Deportivo"
        [class.error]="title?.invalid && title?.touched">
      <span class="error-message" *ngIf="title?.invalid && title?.touched">
        <span *ngIf="title?.errors?.['required']">El nombre es requerido</span>
        <span *ngIf="title?.errors?.['minlength']">Mínimo 3 caracteres</span>
      </span>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description" class="form-label">
        Descripción <span class="required">*</span>
      </label>
      <textarea
        id="description"
        formControlName="description"
        class="form-textarea"
        rows="4"
        placeholder="Describe el servicio en detalle..."
        [class.error]="description?.invalid && description?.touched">
      </textarea>
      <span class="error-message" *ngIf="description?.invalid && description?.touched">
        <span *ngIf="description?.errors?.['required']">La descripción es requerida</span>
        <span *ngIf="description?.errors?.['minlength']">Mínimo 10 caracteres</span>
      </span>
    </div>

    <!-- Duration and Price -->
    <div class="form-row">
      <div class="form-group">
        <label for="duration" class="form-label">
          Duración (minutos) <span class="required">*</span>
        </label>
        <input
          type="number"
          id="duration"
          formControlName="duration"
          class="form-input"
          min="15"
          step="15"
          [class.error]="duration?.invalid && duration?.touched">
        <span class="error-message" *ngIf="duration?.invalid && duration?.touched">
          <span *ngIf="duration?.errors?.['required']">La duración es requerida</span>
          <span *ngIf="duration?.errors?.['min']">Mínimo 15 minutos</span>
        </span>
      </div>

      <div class="form-group">
        <label for="price" class="form-label">
          Precio ($) <span class="required">*</span>
        </label>
        <input
          type="number"
          id="price"
          formControlName="price"
          class="form-input"
          min="0"
          step="10"
          [class.error]="price?.invalid && price?.touched">
        <span class="error-message" *ngIf="price?.invalid && price?.touched">
          <span *ngIf="price?.errors?.['required']">El precio es requerido</span>
          <span *ngIf="price?.errors?.['min']">El precio debe ser mayor a 0</span>
        </span>
      </div>
    </div>

    <!-- Icon Selection -->
    <div class="form-group">
      <label class="form-label">
        Icono <span class="required">*</span>
      </label>
      <div class="icon-selector">
        <label 
          *ngFor="let iconOption of iconOptions"
          class="icon-option"
          [class.selected]="icon?.value === iconOption.value">
          <input
            type="radio"
            formControlName="icon"
            [value]="iconOption.value"
            class="icon-radio">
          <span class="icon-display">{{ iconOption.icon }}</span>
          <span class="icon-label">{{ iconOption.label }}</span>
        </label>
      </div>
    </div>

    <!-- Active Status -->
    <div class="form-group">
      <label class="toggle-label">
        <input
          type="checkbox"
          formControlName="isActive"
          class="toggle-input">
        <span class="toggle-slider"></span>
        <span class="toggle-text">
          Servicio {{ isActive?.value ? 'Activo' : 'Inactivo' }}
        </span>
      </label>
      <p class="help-text">
        Los servicios inactivos no aparecerán en el formulario de reserva
      </p>
    </div>

    <!-- Actions -->
    <div class="form-actions">
      <button 
        type="button" 
        class="btn-cancel" 
        (click)="onCancel()">
        Cancelar
      </button>
      
      <button 
        *ngIf="mode === 'edit' && service?.id"
        type="button" 
        class="btn-delete" 
        (click)="onDelete()">
        Eliminar
      </button>
      
      <button 
        type="submit" 
        class="btn-save"
        [disabled]="serviceForm.invalid">
        {{ mode === 'create' ? 'Crear Servicio' : 'Guardar Cambios' }}
      </button>
    </div>
  </form>
</div>